<!DOCTYPE html>
<html>
<head>
    <title>Clear All Orders - Mr. Happy Fresh Start</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 50px auto;
            padding: 20px;
            background-color: #1f2937;
            color: white;
        }
        .container {
            background-color: #374151;
            padding: 30px;
            border-radius: 10px;
            text-align: center;
            border: 2px solid #dc2626;
        }
        button {
            background-color: #dc2626;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 16px;
            border-radius: 8px;
            cursor: pointer;
            margin: 10px;
        }
        button:hover {
            background-color: #b91c1c;
        }
        .success { color: #10b981; }
        .error { color: #ef4444; }
        .warning { 
            color: #f59e0b; 
            background-color: #451a03;
            padding: 15px;
            border-radius: 5px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üóëÔ∏è Mr. Happy - Fresh Start</h1>
        <div class="warning">
            <strong>‚ö†Ô∏è WARNUNG:</strong><br>
            Diese Seite l√∂scht ALLE Bestellungen und Daten aus dem Admin Panel!<br>
            <strong>Diese Aktion kann NICHT r√ºckg√§ngig gemacht werden!</strong>
        </div>
        
        <p>Klicken Sie auf den Button unten, um alle Bestellungen zu l√∂schen und einen kompletten Neuanfang zu starten:</p>
        
        <button onclick="clearAllOrders()" id="clearButton">
            üóëÔ∏è ALLE BESTELLUNGEN L√ñSCHEN
        </button>
        
        <p id="result"></p>
        
        <hr style="margin: 30px 0;">
        <p><small>Nach dem L√∂schen schlie√üen Sie diese Seite und laden Sie Ihr Admin Panel neu.</small></p>
    </div>

    <script>
        function clearAllOrders() {
            const result = document.getElementById('result');
            const button = document.getElementById('clearButton');
            
            if (!confirm('‚ö†Ô∏è LETZTE WARNUNG!\n\nSind Sie ABSOLUT SICHER, dass Sie ALLE Bestellungen l√∂schen m√∂chten?\n\nDies l√∂scht:\n- Alle aktuellen Bestellungen\n- Alle vergangenen Bestellungen\n- Alle Kunden-Benachrichtigungen\n- Alle Demo-Daten\n\nDiese Aktion kann NICHT r√ºckg√§ngig gemacht werden!\n\nKlicken Sie "OK" nur wenn Sie einen kompletten Neuanfang wollen.')) {
                return;
            }
            
            try {
                // Clear all order-related localStorage keys
                localStorage.removeItem('adminOrders');
                localStorage.removeItem('mr-happy-orders');
                
                // Clear all notification data and other order-related data
                const keys = Object.keys(localStorage);
                let clearedCount = 0;
                
                keys.forEach(key => {
                    if (key.startsWith('notifications-') || 
                        key.includes('demo') || 
                        key.includes('test') ||
                        key.includes('Order') || 
                        key.includes('order')) {
                        localStorage.removeItem(key);
                        clearedCount++;
                    }
                });
                
                button.style.display = 'none';
                result.innerHTML = '<div class="success"><h2>‚úÖ ERFOLGREICH GEL√ñSCHT!</h2><p>Alle Bestellungen wurden erfolgreich entfernt (' + (clearedCount + 2) + ' Dateneintr√§ge gel√∂scht).</p><p><strong>Ihr Admin Panel startet jetzt frisch!</strong></p><p>Sie k√∂nnen diese Seite jetzt schlie√üen und Ihr Admin Panel neu laden.</p></div>';
                
                console.log('All order data cleared successfully - Fresh start ready!');
                
            } catch (error) {
                result.innerHTML = '<div class="error"><h3>‚ùå FEHLER</h3><p>Fehler beim L√∂schen der Daten: ' + error.message + '</p></div>';
                console.error('Error clearing order data:', error);
            }
        }

        // Show current data status on load
        window.onload = function() {
            const adminOrders = localStorage.getItem('adminOrders');
            const mrHappyOrders = localStorage.getItem('mr-happy-orders');
            const orderCount = (adminOrders ? JSON.parse(adminOrders).length : 0) + 
                              (mrHappyOrders ? JSON.parse(mrHappyOrders).length : 0);
            
            if (orderCount > 0) {
                document.getElementById('result').innerHTML = 
                    '<p style="color: #f59e0b;">üìä Aktuelle Bestellungen: ' + orderCount + '</p>';
            } else {
                document.getElementById('result').innerHTML = 
                    '<p style="color: #10b981;">‚úÖ Keine Bestellungen vorhanden - bereits sauber!</p>';
            }
        }
    </script>
</body>
</html>